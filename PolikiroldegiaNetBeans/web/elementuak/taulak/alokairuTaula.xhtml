<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:form id="aloForm">  

        <p:growl id="msgs" showDetail="true"/>  

        <p:dataTable id="aloTaula" var="alo" value="#{alokairuZerrenda.zerrenda}" emptyMessage="Ez da alokairurik aurkitu" paginator="true" rows="10" editable="true" >  

            <!-- TAULAREN IZENA -->
            <f:facet name="header">  
                ALOKAIRUAK 
            </f:facet> 

            <p:column filterBy="#{alo.instalazioa}" headerText="INSTALAZIO ID" >  
                <h:outputText value="#{alo.instalazioa}" /> 
            </p:column> 

            <p:column filterBy="#{alo.bezeroId}" headerText="BEZERO ID" > 
                <h:outputText value="#{alo.bezeroId}" /> 
            </p:column>  

            <p:column filterBy="#{alo.dataOrdua}" headerText="DATA ETA ORDUA" >  

                <h:outputText value="#{alo.dataOrdua}" /> 

            </p:column>  


            <p:column>  

                <p:commandButton id="selectButton" update=":tabView:aloForm:aloDisplay" oncomplete="aloDialog.show()" icon="ui-icon-search" title="Ikusi">  
                    <f:setPropertyActionListener value="#{alo}" target="#{alokairuZerrenda.selectedAlokairua}" />  
                </p:commandButton>  


                <p:commandButton process="@this" id="ezabatuButton" update=":tabView:aloForm:aloTaula" actionListener="#{alokairuZerrenda.ezabatuAlokairua(alo)}"  oncomplete="javascript:location.reload(true)" icon="ui-icon-close" title="Ezabatu" > 
                </p:commandButton> 

               

            </p:column> 


        </p:dataTable> 




        <p:dialog header="Alokairuari buruzko informazioa" widgetVar="aloDialog" resizable="false" id="aloDlg" showEffect="fade" hideEffect="explode" modal="true">  

            <h:panelGrid id="aloDisplay" columns="2" cellpadding="4" style="margin:0 auto;">  

                <h:outputText value="INSTALAZIO ID:" />  
                <h:outputText value="#{alokairuZerrenda.selectedAlokairua.instalazioa}" style="font-weight:bold"/>  

                <h:outputText value="BEZERO ID" />  
                <h:outputText value="#{alokairuZerrenda.selectedAlokairua.bezeroId}" style="font-weight:bold"/>  

                <h:outputText value="DATA ETA ORDUA:" />  
                <h:outputText value="#{alokairuZerrenda.selectedAlokairua.dataOrdua}" style="font-weight:bold"/>  
                
                <h:outputText value="OHARRA:" />  
                <h:outputText value="#{alokairuZerrenda.selectedAlokairua.oharra}" style="font-weight:bold"/> 
            </h:panelGrid>  

        </p:dialog> 


        <p:panel header="Alokairu berri bat sartu">  
            <h:panelGrid columns="2" id="grid">  

                <h:outputLabel value="Instalazioa: *" ></h:outputLabel>  
                <p:selectOneMenu id="aloInstId" value="#{alokairuZerrenda.alo.instalazioa}" converter="instConv">                      
                    <f:selectItem itemLabel="Instalazioa"/>  
                    <f:selectItems value="#{instalazioZerrenda.zerrenda}" var="inst" itemLabel="#{inst.izena}"/>  
                </p:selectOneMenu>

                
                <h:outputLabel value="Bezeroa: *" ></h:outputLabel>  
                <p:selectOneMenu id="aloBezId" value="#{alokairuZerrenda.alo.bezeroId}">                      
                    <f:selectItem itemLabel="Bezeroa"/>  
                    <f:selectItems value="#{bezeroZerrenda.zerrenda}" var="bez" itemLabel="#{bez.izena}"/>  
                </p:selectOneMenu>
                
                              
                <h:outputLabel value="DataOrdua : *" ></h:outputLabel>  
                <p:inputText value="#{alokairuZerrenda.alo.dataOrdua}"  /> 

                <p:commandButton value="Ezabatu" type="reset"/> 


                <p:commandButton id="gehitu" value="Alokairua gehitu" update="aloTaula msgs @parent" action="#{alokairuZerrenda.alokairuaGorde()}" >  

                    <p:collector value="#{alokairuZerrenda.alo}" addTo="#{alokairuZerrenda.zerrenda}" />  
                </p:commandButton> 



            </h:panelGrid>  
        </p:panel>
       
    </h:form>  

</ui:composition>



